<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Virtual Cake Cutting</title>
<style>
body {
    margin: 0;
    padding: 0;
    font-family: "Poppins", Arial, sans-serif;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
    position: relative;
}

/* Cake Container */
.cake-container {
    position: relative;
    cursor: pointer;
    font-size: clamp(70px, 18vw, 120px);
    z-index: 10;
    margin-bottom: 20px;
}

/* Knife */
.knife {
    position: absolute;
    bottom: -90px;
    left: 50%;
    font-size: clamp(40px, 12vw, 60px);
    transform: translateX(-50%);
    transition: bottom 0.7s ease-in;
    z-index: 12;
}

/* Wish Text */
.wish-text {
    margin-top: 10px;
    font-size: clamp(16px, 5vw, 22px);
    color: #222;
    opacity: 0;
    transition: opacity 1s ease;
    z-index: 11;
    text-align: center;
    font-weight: 600;
    padding: 0 12px;
    line-height: 1.4;
}

/* Cut Cake Animation */
.cut .cake-emoji {
    transform: rotateY(20deg);
}

.cut .knife {
    bottom: 70px;
}

/* Next Button */
#nextBtn {
    display: none;
    margin-top: 15px;
    padding: 12px 28px;
    font-size: clamp(14px, 4vw, 18px);
    color: white;
    background: #ff4081;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    z-index: 15;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transition: transform 0.3s ease, background 0.3s ease;
}

#nextBtn:hover {
    background: #e91e63;
    transform: scale(1.05);
}

/* Canvas */
canvas {
    position: fixed;
    top:0; left:0;
    width:100%;
    height:100%;
    z-index:0;
    pointer-events:none;
}

/* Hint Message */
.hint {
    position: absolute;
    top: 5%;
    left: 50%;
    transform: translateX(-50%);
    font-size: clamp(14px, 4vw, 18px);
    background: rgba(255,255,255,0.8);
    padding: 8px 16px;
    border-radius: 20px;
    color: #ff4081;
    font-weight: bold;
    animation: bounce 1.5s infinite;
    z-index: 20;
}

@keyframes bounce {
    0%,100% { transform: translate(-50%, 0); }
    50% { transform: translate(-50%, -8px); }
}
</style>
</head>
<body>

<canvas id="fireworksCanvas"></canvas>

<div class="hint">ğŸ‘‰ Tap the Cake to Cut ğŸ‚</div>

<div class="cake-container" id="cakeContainer">
    <div class="cake-emoji">ğŸ‚</div>
    <div id="knife" class="knife">ğŸ”ª</div>
</div>

<div class="wish-text" id="wishText">
    ğŸ‰ Wishing you the Happiest Birthday My Love ğŸ‚â¤ï¸ <br>
    I couldnâ€™t cut the cake with you in person, so hereâ€™s a little surprise âœ¨<br>
    Make a wish ğŸ•¯ï¸ and letâ€™s celebrate together virtually ğŸŠğŸ’–
</div>

<button id="nextBtn" onclick="window.location.href='surprise_box'">Move to Next ğŸ</button>

<script>
// Cake cutting animation
const cakeContainer = document.getElementById('cakeContainer');
const wishText = document.getElementById('wishText');
const nextBtn = document.getElementById('nextBtn');
const knife = document.getElementById('knife');
const hint = document.querySelector('.hint');

cakeContainer.addEventListener('click', () => {
    knife.style.bottom = '70px';
    cakeContainer.querySelector('.cake-emoji').classList.add('cut');
    hint.style.display = "none"; // hide hint after click

    setTimeout(() => {
        wishText.style.opacity = 1;
        nextBtn.style.display = 'inline-block';
    }, 2500);
});

// Fireworks
const canvas = document.getElementById('fireworksCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let fireworks = [];
let texts = [];

class Particle {
    constructor(x, y, color){
        this.x = x;
        this.y = y;
        this.color = color;
        this.radius = Math.random()*3+1;
        this.velocity = {x:(Math.random()-0.5)*6, y:(Math.random()-0.5)*6};
        this.alpha = 1;
        this.decay = 0.02+Math.random()*0.02;
    }
    update(){ this.x += this.velocity.x; this.y += this.velocity.y; this.alpha -= this.decay; }
    draw(){ ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,Math.PI*2); ctx.fillStyle=this.color; ctx.globalAlpha=this.alpha; ctx.fill(); ctx.globalAlpha=1;}
}

class Firework {
    constructor(){
        this.x = Math.random()*canvas.width;
        this.y = canvas.height;
        this.targetY = Math.random()*canvas.height/2;
        this.color = `hsl(${Math.random()*360},100%,50%)`;
        this.particles = [];
        this.exploded = false;
    }
    update(){
        if(!this.exploded){
            this.y -= 4;
            if(this.y <= this.targetY){
                this.exploded = true;
                for(let i=0;i<40;i++){
                    this.particles.push(new Particle(this.x,this.y,this.color));
                }
                texts.push({x:this.x, y:this.y, alpha:1});
            }
        } else {
            this.particles.forEach(p=>p.update());
            this.particles = this.particles.filter(p=>p.alpha>0);
        }
    }
    draw(){
        if(!this.exploded){
            ctx.beginPath();
            ctx.arc(this.x,this.y,3,0,Math.PI*2);
            ctx.fillStyle = this.color;
            ctx.fill();
        } else {
            this.particles.forEach(p=>p.draw());
        }
    }
}

function animate(){
    ctx.fillStyle = 'rgba(255,255,255,0.2)'; 
    ctx.fillRect(0,0,canvas.width,canvas.height);

    if(Math.random()<0.05){
        fireworks.push(new Firework());
    }

    for(let i=0;i<fireworks.length;i++){
        fireworks[i].update();
        fireworks[i].draw();
        if(fireworks[i].exploded && fireworks[i].particles.length===0){
            fireworks.splice(i,1); i--;
        }
    }

    texts.forEach((t,i)=>{
        ctx.globalAlpha = t.alpha;
        ctx.font = "bold 22px Poppins, Arial";
        ctx.fillStyle = "#ff4081";
        ctx.fillText("ğŸ‰ Happy Birthday! ğŸ‰", t.x-80, t.y);
        t.alpha -= 0.01;
        if(t.alpha <= 0) texts.splice(i,1);
    });
    ctx.globalAlpha = 1;

    requestAnimationFrame(animate);
}
animate();

window.addEventListener('resize',()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>
